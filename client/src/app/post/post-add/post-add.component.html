<div class="post-add-wrapper">
  <div class="example-loading-shade" *ngIf="isLoadingResults">
    <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
  </div>
  <form [formGroup]="postForm" (ngSubmit)="onFormSubmit()">
    <div class="form-header">
      <h3>New Post</h3>
      <p [routerLink]="['/post']">Back to post</p>
    </div>
    <mat-form-field appearance="outline" class="example-full-width">
      <mat-label>Catigories</mat-label>
      <mat-select formControlName="category" [errorStateMatcher]="matcher">
        <mat-option *ngFor="let cat of categories" [value]="cat._id">
          {{ cat.catName }}
        </mat-option>
      </mat-select>
      <mat-error>
        <span
          *ngIf="
            !postForm.get('category').valid && postForm.get('category').touched
          "
          >Please select Category</span
        >
      </mat-error>
    </mat-form-field>

    <div class="title-disc">
      <mat-form-field appearance="outline" class="example-full-width">
        <mat-label>Post Title</mat-label>
        <input
          matInput
          placeholder="Post Title"
          formControlName="postTitle"
          [errorStateMatcher]="matcher"
        />
        <mat-error>
          <span
            *ngIf="
              !postForm.get('postTitle').valid &&
              postForm.get('postTitle').touched
            "
            >Please enter Post Title</span
          >
        </mat-error>
      </mat-form-field>
      <div class="space"></div>
      <mat-form-field appearance="outline" class="example-full-width">
        <mat-label>Author</mat-label>
        <input
          matInput
          placeholder="Post Author"
          formControlName="postAuthor"
          [errorStateMatcher]="matcher"
        />
        <mat-error>
          <span
            *ngIf="
              !postForm.get('postAuthor').valid &&
              postForm.get('postAuthor').touched
            "
            >Please enter Post Author</span
          >
        </mat-error>
      </mat-form-field>
    </div>

    <mat-form-field appearance="outline" class="example-full-width">
      <mat-label>Post Description</mat-label>
      <textarea
        matInput
        placeholder="Post Desc"
        formControlName="postDesc"
        [errorStateMatcher]="matcher"
      ></textarea>
      <mat-error>
        <span
          *ngIf="
            !postForm.get('postDesc').valid && postForm.get('postDesc').touched
          "
          >Please enter Post Description</span
        >
      </mat-error>
    </mat-form-field>

    <div class="ref-url">
      <mat-form-field appearance="outline" class="example-full-width">
        <mat-label>Post Reference</mat-label>
        <input
          matInput
          placeholder="Post Reference"
          formControlName="postReference"
          [errorStateMatcher]="matcher"
        />
        <mat-error>
          <span
            *ngIf="
              !postForm.get('postReference').valid &&
              postForm.get('postReference').touched
            "
            >Please enter Post Ref</span
          >
        </mat-error>
      </mat-form-field>
      <div class="space"></div>
      <mat-form-field appearance="outline" class="example-full-width">
        <mat-label>Post Image Url</mat-label>
        <input
          matInput
          placeholder="Post Image URL"
          formControlName="postImgUrl"
          [errorStateMatcher]="matcher"
        />
        <mat-error>
          <span
            *ngIf="
              !postForm.get('postImgUrl').valid &&
              postForm.get('postImgUrl').touched
            "
            >Please enter Post Image URL</span
          >
        </mat-error>
      </mat-form-field>
    </div>

    <div class="mat-form-field">
      <ckeditor
        matCkeditor
        placehoder="Post Content"
        formControlName="postContent"
      ></ckeditor>
      <mat-error>
        <span
          *ngIf="
            !postForm.get('postContent').valid &&
            postForm.get('postContent').touched
          "
          >Please enter Post Content</span
        >
      </mat-error>
    </div>

    <button
      type="submit"
      [disabled]="!postForm.valid"
      mat-button
      class="mat-form-field"
    >
      Post
    </button>
  </form>
</div>
